# pdf2anki
This project is the base library for a pdf to Anki flashcard generator. 

It is a python library with two main functions: preprocess pdf to Anki content (csv/dat and images/media) and then converts the preprocessed data to an Anki .apkg.

- The preprocess function ingests a pdf and a configuration file and outputs a CSV (and /images/ directory) with content for Anki flashcards generated by an LLM based on the PDF contents and configuration. 
- The configuration file contains pdf ingestion config (read chunks, read chapter, read entire, etc), LLM prompt instructions, input/output paths (as needed), Anki deck configuration, flashcard generation methods, etc and any other configuration settings that are appropriate. 
- There are a number of pre-defined Flashcard generation strategies, for example: 'identify key points' (name TBD) will simply identify the key areas of <a research paper> and generate Flashcards based on that; 'parse chapter' will read e.g. a chapter of a textbook and convert it to an appropriate amount of flashcards; 'highlighter' will focus on comments and highlights made on the PDF (the context of the highlight should be considered when they are examined; among others (generate a few obvious ideas and strategies for inclusion). 
- In addition to /how/ the PDF is parsed, the LLM flashcard generator should be configurable by e.g.; cloze-card-generation strategies (sensible limits for total sentences and number of clozures), density of flashcard generations, hierarchical summaries (summarize key themes and overview of chapter, then iteratively introduce concepts in increasing depth)
- Images and pdf screenshots can be incorporated directly into the flashcards, if deemed appropriate (determine by Picture/Table/Figure description), with a further confirmation check by LLM if really required. 
- Multiple PDFs can be ingested into the same Anki .apkg file; if a new PDF is added to the directory then any new content is updated in the existing files. A configuration file can be set that will define how each PDF should be processed (e.g. TextBookTitle.pdf: 'textbook', 'hierarchical cloze' / ResearchPaper.pdf: 'keypoints'), etc. A sensible default should be used, and autodetection of common pdf types (by filesize, number of pages, if Chapters, etc). Each pdf can be processed using n different configurations (implement this in a sensible fashion).  
- The library uses langchain to access LLM / ChatGPT responses. 
- Anki configuration should allow for definition of flashcard / note templates, e.g. setting the Note fields, and Card types, what columns need to be filled for each, etc. 
- Metadata about the pdf, page, title, authors, etc will also be included in the Anki flashcards. 
- Metadata about the LLM should also be included in the flashcards. 
- Each flashcard should have a unique ID (for Anki). 
- Anki flashcards can also be grouped as Subdecks or with specific tags. Required ones can be set in the configuration, but also allow for configuration of tag generation via LLM. 

- the prompts/ directory contains a set of templated prompts that allow for easy modification and integration of new prompts. Create a few default options based on the description of this library and its intended uses. 
- A two-stage step for preprocessing the PDFs into CSVs allows for manual intervention and correction of files before they get packaged into an .apkg file. 
- The library can run as a Docker container, or be installed as a python library. 
-  

# Expected input: 

Academic pdfs (i.e. research papers), and Textbooks (long, technical). 

# Downstream Repos
Downstream repos will use this library to automate update, generation and building of Anki .apkg files. 

